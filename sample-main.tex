\usepackage{verbatim}
\usepackage{mdframed}
\title{A Sample Document\\for the Usages of \textsf{lstEventB} Package}
\author{Thai Son Hoang\\ECS, University of Southampton\\\texttt{<T dot S dot Hoang at ecs dot soton dot ac dot uk>}}

\begin{document}
\maketitle
For convenient, we define macro \verb|\EventB| for \EventB. 

We start first with some inline \EventB code by embedding them using a pair of \verb|$|, for example \verb|$@grd1 "SNSR = FALSE"$| gives $@grd1 "SNSR = FALSE"$. Any \EventB formulae including Unicode symbols will be typeset using the \verb|bsymb| package accordingly.

\begin{table}[!htbp]
  \centering
  \begin{tabular}{|l|l|l|}
    \hline
    ASCII & Symbols & Explanation \\
    \hline
    \verb|false| & $false$ & False \\
    \verb|true| & $true$ & True \\
    \verb|&| & $&$ & Conjunction \\
    \verb|or| & $or$ & Disjunction \\
    \verb|=>| & $=>$ & Implication \\
    \verb|<=>| & $<=>$ & Equivalence \\
    \verb|not| & $not$ & Negation \\
    \verb|!| & $!$ & Universal quantification \\
    \verb|#| & $#$ & Existential quantification \\
    \verb|.| & $.$ & Quantification dot \\
    \verb|/=| & $/=$ & Inequality \\
    \hline
  \end{tabular}
  \caption{Predicates}
\end{table}

\begin{table}[!htbp]
  \centering
  \begin{tabular}{|l|l|l|}
    \hline
    ASCII & Symbols & Explanation \\
    \hline
    \verb|{}| & ${}$ & Empty set \\
    \verb$|$ & $|$ & Vertical bar, e.g., in set comprehension \\
    \verb|\/| & $\/$ & Union \\
    \verb|/\| & $/\$ & Intersection \\
    \verb$\$ & $\$ & Set difference \\
    \verb|**| & $**$ & Cartesian product \\
    \verb|POW| & $POW$ & Powerset \\
    \verb|POW1| & $POW1$ & Non-empty subsets \\
    \verb|card| & $card$ & Cardinality \\
    \verb|union| & $union$ & Generalised union \\
    \verb|inter| & $inter$ & Generalised intersection \\
    \verb|UNION| & $UNION$ & Quantified union \\
    \verb|INTER| & $INTER$ & Quantified intersection \\
    \hline
  \end{tabular}
  \caption{Sets}
\end{table}
 
\begin{table}[!htbp]
  \centering
  \begin{tabular}{|l|l|l|}
    \hline
    ASCII & Symbols & Explanation \\
    \hline
    \verb|:| & $:$ & Set membership \\
    \verb|/:| & $/:$ & Set non-membership \\
    \verb|<:| & $<:$ & Subset \\
    \verb|/<:| & $/<:$ & Not a subset \\
    \verb|<<:| & $<<:$ & Proper subset \\
    \verb|/<<:| & $/<<:$ & Not a proper subset \\
    \verb|finite| & $finite$ & Finite \\
    \verb|partition| & $partition$ & Partition \\
    \hline
  \end{tabular}
  \caption{Set predicates}
\end{table}


\begin{table}[!htbp]
  \centering
  \begin{tabular}{|l|l|l|}
    \hline
    ASCII & Symbols & Explanation \\
    \hline
    \verb|BOOL| & $BOOL$ & BOOL set \\
    \verb$TRUE$ & $TRUE$ & TRUE \\
    \verb|FALSE| & $FALSE$ & FALSE \\
    \verb|bool| & $bool$ & bool predicate \\
    \hline
  \end{tabular}
  \caption{BOOL and bool}
\end{table}
 
\begin{table}[!htbp]
  \centering
  \begin{tabular}{|l|l|l|}
    \hline
    ASCII & Symbols & Explanation \\
    \hline
    \verb|INT| & $INT$ & Set of integer numbers \\
    \verb|NAT| & $NAT$ & Set of natural numbers \\
    \verb|NAT1| & $NAT1$ & Set of positive natural numbers \\
    \verb|min| & $min$ & Mininum \\
    \verb|max| & $max$ & Maximum \\
    \verb|-| & $-$ & Difference \\
    \verb|*| & $*$ & Product \\
    \verb|/| & $/$ & Quotient \\
    \verb|mod| & $mod$ & Remainder \\
    \verb|..| & $..$ & Interval  \\
    \hline
  \end{tabular}
  \caption{Numbers}
\end{table}

\begin{table}[!htbp]
  \centering
  \begin{tabular}{|l|l|l|}
    \hline
    ASCII & Symbols & Explanation \\
    \hline
    \verb|>| & $>$ & Greater \\
    \verb|<| & $<$ & Less \\
    \verb|>=| & $>=$ & Greater or equal \\
    \verb|<=| & $<=$ & Less or equal \\
    \hline
  \end{tabular}
  \caption{Number predicates}
\end{table}

\begin{table}[!htbp]
  \centering
  \begin{tabular}{|l|l|l|}
    \hline
    ASCII & Symbols & Explanation \\
    \hline
    \verb|<->| & $<->$ & Relations \\
    \verb|dom| & $dom$ & Domain \\
    \verb|ran| & $ran$ & Range \\
    \verb|<<->| & $<<->$ & Total relations \\
    \verb|<->>| & $<<->$ & Surjective relations \\
    \verb|<<->>| & $<<->>$ & Total surjective relations \\
    \verb|circ| & $circ$ & Backward composition \\
    \verb|id| & $id$ & Identity \\
    \verb$<|$ & $<|$ & Domain restriction \\
    \verb$<<|$ & $<<|$ & Domain subtraction \\
    \verb$|>$ & $|>$ & Range restriction \\
    \verb$|>>$ & $|>>$ & Range subtraction \\
    \verb|~| & $~$ & Inverse \\
    \verb|<+| & $<+$ & Overriding \\
    \verb|><| & $><$ & Direct product \\
    \verb$||$ & $||$ & Parallel product \\
    \verb$prj1$ & $prj1$ & First projection \\
    \verb$prj2$ & $prj2$ & Second projection \\
    \hline
  \end{tabular}
  \caption{Relations}
\end{table}

\begin{table}[!htbp]
  \centering
  \begin{tabular}{|l|l|l|}
    \hline
    ASCII & Symbols & Explanation \\
    \hline
    \verb|+->| & $+->$ & Partial functions \\
    \verb|-->| & $-->$ & Total functions \\
    \verb|>+>| & $>+>$ & Partial injections \\
    \verb|>->| & $>->$ & Total injections \\
    \verb|+>>| & $+>>$ & Partial surjections \\
    \verb|->>| & $->>$ & Total surjections \\
    \verb|>->>| & $>->>$ & Bijections \\
    \verb|%| & $%$ & Lambda abstraction \\
    \hline
  \end{tabular}
  \caption{Functions}
\end{table}

\begin{table}[!htbp]
  \centering
  \begin{tabular}{|l|l|l|}
    \hline
    ASCII & Symbols & Explanation \\
    \hline
    \verb|:=| & $:=$ & Becomes equal to \\
    \verb|::| & $::$ & Choice from a set  \\
    \verb|:|| & $:|$ & Choice by predicate \\
    \hline
  \end{tabular}
  \caption{Functions}
\end{table}
 
More complete piece of code (including the Unicode symbols) can be typeset using the \verb|EventBcode| environment. Below is the typesetting of an \EventB machine.
\begin{EventBcode}
machine Sensor_m0_SNSR
variables
	SNSR
invariants
	@thm0_1: "SNSR ∈ BOOL" theorem
events

	INITIALISATION
	begin
		@act1: "SNSR ≔ FALSE"
	end

	SNSR_on
	when
		@grd1: "SNSR = FALSE"
	then
		@act1: "SNSR ≔ TRUE"
	end

	SNSR_off
	when
		@grd1: "SNSR = TRUE"
	then
		@act1: "SNSR ≔ FALSE"
	end

end
\end{EventBcode}

One can change the different colour options.  For example, \verb|\EventBSetKeywordColour{blue!50!black}| will change the keyword colour to dark blue. (This has effects only when 
\begin{EventBcode}
machine Sensor_m0_SNSR
variables
	SNSR
invariants
	@thm0_1: "SNSR ∈ BOOL" theorem
\end{EventBcode}

One can includes external file containing \EventB code using the \verb|\EventBinputlisting| command.  For example the following is the result of including the code in the file \verb|Sensor_m1_DEP.bumx| using \verb|\EventBinputlisting{Sensor_m1_DEP.bumx}|.
\EventBinputlisting{Sensor_m1_DEP.bumx}

More specifically, one can specify more details on the inclusion, e.g., the ranges, as the following example\\
\verb|\EventBinputlisting[firstline=16,lastline=20]{Sensor_m2_snsr.bumx}|
gives
\EventBinputlisting[firstline=16,lastline=20]{Sensor_m2_snsr.bumx}

\EventBinputlisting{Sensor_m3_Ctrl.bumx}
\end{document}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "sample-lstEventB"
%%% End: 
